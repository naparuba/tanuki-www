<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>2.0 release / Some monitoring guys</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="shortcut icon" href="/theme/favicon.ico" />
        <link rel="apple-touch-icon" href="/theme/apple-touch-icon-iphone.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/theme/apple-touch-icon-ipad.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/theme/apple-touch-icon-iphone4.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="/theme/apple-touch-icon-ipad3.png" />

        <link rel="stylesheet" href="/theme/css/bootstrap.min.css">
        <link rel="stylesheet" href="/theme/css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="/theme/css/colorbox.css">

        <link rel="stylesheet" href="/theme/css/main.css">

        <script src="/theme/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div class="container-fluid">
            <div class="row-fluid">

	      <a class='span4' href='/'> Home</a>
	      <a class='span1' href='/intro/index.html'>Intro</a>
	      <a class='span1' href='/docs/index.html'>Docs</a>
	      <a class='span1' href='/community.html'>Community</a>
	      <a class='span1' href='/demo.html'>Demo</a>
	      <a class='span2' href='/download.html'>Download</a>
	      <a class='span2' href='github'>Github</a>
	    </div>
            <div class="row-fluid">
                <div class="span4" id='content'>
		  

                </div> <!-- logo+navigation span -->


                <div class="span8">
                    <header id="site-header">
                        <h1>
                            <a href="">Some monitoring guys</a>
                            <small>
                                <span class="divider">/</span> 
                            </small>
                        </h1>
                        <!--<p>
                            
                        </p>-->
                    </header>

                    <div class="content">
<section>
    <article>
        <header>
            <h2><a href="/2-0-release/" rel="bookmark">2.0 release</a></h2>
            <time datetime="2014-04-16T10:20:00">Apr 16, 2014</time>
	    <span class='author'>, Gabès Jean</span>

        </header>

    <p>Hi,</p>
<p>Here is the 2.0 release. The road was long since the 1.4 version, but we got lot of great new things to make your minitoring easier :)</p>
<h3>Modules and packs are now in their own repos</h3>
<p>In the 1.4 version, lot of modules and packs (there where more than 99 of them!) where provided with the shinken installation. It was a big mess where nobody really known what was provided. We switch to a more "explicit" way, and we moved all modules and packs into their own repositories. You can find all the default provided one on the <a href="https://github.com/shinken-monitoring">project github organization</a>.</p>
<p>Now the shinken installation will only provide the core framework with the daemons and all the monitoring capabilities. But if you need some modules, you will have to explicitly install them but at least you will know what is runing and why :)</p>
<p>All modules and packs are available as <em>packages</em> on the new exchange website, <a href="http://shinken.io">shinken.io</a>. The goal of this new website is to be the place of modules and configuration packs publications. You can publish your own modules or packs into this website, it's designed for this :)</p>
<p>You don't need to have a repository in the github organization for this, all you need is to have a public repository, like on github. </p>
<p>One other thing that is possible now with the <em>not in the same repository</em> thing, is that now each modules/pack can have its own release cycle! For example I'll release a new retention-mongodb module the next week :)</p>
<h3>Easy shinken installation (and update)</h3>
<p>Now in order to install <em>shinken</em> you don't need to run an install script. All you need to do is to launch:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">shinken</span>
</pre></div>


<p>We deprecated the old <code>install</code> script, but it's still available in the <code>/contrib</code> part of the shinken repo if you want to maintain it. We won't provide any more the addons installations by this way, as it's more the packagers works and it was taking us too much time that we prefer to use on making the framework even more awesome :)</p>
<h3>The new <em>shinken</em> cli command</h3>
<p>To make easy the modules/packs installation, we are adding the new "shinken" cli command. It is strongly linked with <a href="http://shinken.io">shinken.io</a> for the packages installation part of course.</p>
<p>In order to use it, you will have to call the <code>--init</code> parameter so it will create the <code>~/shinken.ini</code> file with all the paths to the shinken directories:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">shinken</span> <span class="o">--</span><span class="n">init</span>
</pre></div>


<p>Then you can start to search and install packages:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">shinken</span> <span class="n">search</span> <span class="n">linux</span>
<span class="n">glances</span> <span class="p">(</span><span class="n">david</span><span class="o">-</span><span class="n">guenault</span><span class="p">)</span> <span class="p">[</span><span class="n">pack</span><span class="p">,</span><span class="n">system</span><span class="p">,</span><span class="n">linux</span><span class="p">,</span><span class="n">glances</span><span class="p">]</span> <span class="o">:</span> <span class="n">Standard</span> <span class="n">check</span> <span class="n">through</span> <span class="n">checkglances</span><span class="p">.</span><span class="n">py</span> <span class="n">and</span> <span class="n">glances</span> <span class="n">server</span>
<span class="n">linux</span><span class="o">-</span><span class="n">snmp</span> <span class="p">(</span><span class="n">naparuba</span><span class="p">)</span> <span class="p">[</span><span class="n">pack</span><span class="p">,</span><span class="n">linux</span><span class="p">,</span><span class="n">snmp</span><span class="p">]</span> <span class="o">:</span> <span class="n">Linux</span> <span class="n">checks</span> <span class="n">based</span> <span class="n">on</span> <span class="n">SNMP</span>
<span class="n">linux</span><span class="o">-</span><span class="n">ssh</span> <span class="p">(</span><span class="n">dessaiimrane</span><span class="p">)</span> <span class="p">[</span><span class="n">pack</span><span class="p">,</span><span class="n">linux</span><span class="p">,</span><span class="n">ssh</span><span class="p">]</span> <span class="o">:</span> <span class="n">Linux</span> <span class="n">checks</span> <span class="n">based</span> <span class="n">on</span> <span class="n">SSH</span> <span class="n">without</span> <span class="n">any</span> <span class="n">script</span> <span class="n">on</span> <span class="n">distant</span> <span class="n">server</span>
<span class="n">pack</span><span class="o">-</span><span class="n">glances</span> <span class="p">(</span><span class="n">david</span><span class="o">-</span><span class="n">guenault</span><span class="p">)</span> <span class="p">[</span><span class="n">pack</span><span class="p">,</span><span class="n">system</span><span class="p">,</span><span class="n">linux</span><span class="p">,</span><span class="n">glances</span><span class="p">]</span> <span class="o">:</span> <span class="n">Standard</span> <span class="n">check</span> <span class="n">through</span> <span class="n">checkglances</span><span class="p">.</span><span class="n">py</span> <span class="n">and</span> <span class="n">glances</span> <span class="n">server</span>
</pre></div>


<p>Then you can install it, for example the linux-ssh pack that will use the new <a href="https://github.com/naparuba/check-linux-by-ssh">agentless ssh checks for linux</a> :</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">shinken</span> <span class="n">install</span> <span class="n">linux</span><span class="o">-</span><span class="n">ssh</span>
</pre></div>


<p>You can also use the command to have a local access to the shinken documentation :</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">shinken</span> <span class="n">doc</span><span class="o">-</span><span class="n">serve</span>
</pre></div>


<p>will open an http server on the 8080 port with the documentation :)</p>
<h3>Switch to HTTP(S) for the daemons communications</h3>
<p>One of the main change on this release is we switch from pyro based communication to a more classic HTTP(S) one. Now, a simle curl command will enable you to check and query daemons :</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">curl</span> <span class="n">http</span><span class="o">:</span><span class="c1">//localhost:7770/</span>
<span class="n">OK</span>
</pre></div>


<p>will check the arbiter daemon.</p>
<p>You can get the full HTTP api with:</p>
<div class="highlight"><pre><span class="err">$</span> <span class="n">curl</span> <span class="n">http</span><span class="o">:</span><span class="c1">//localhost:7770/api</span>
</pre></div>


<p>Now it's very easy to setup the SSL encryption between daemons. If you do so, beware of installating the <a href="http://www.cherrypy.org/">cherrypy3</a> lib because the default wsgiref module from Python do not manage the http keep alive feature, and so it will ask far more CPU :)</p>
<h3>The bp_rules boosting</h3>
<p>Thanks to Christophe Simon that work on <a href="https://github.com/naparuba/shinken/pull/996">this code part</a> for the 2.0 release, the bp_rules are now more powerful and flexible.</p>
<p>In the previous release, you have to explicitly call hosts or services by their names. Now you can ask them by :</p>
<ul>
<li>regexp</li>
<li>host or service groups</li>
<li>host tag</li>
<li>service "labels" (new service parameter)</li>
</ul>
<p>Here are some examples how to use the new capabilities :
<pre><code></p>
<h2>Sample of bprules</h2>
<h1>Explicit naming</h1>
<p>test_host_01,srv1 &amp; test_host_02,srv1</p>
<h1>by hostgroup</h1>
<p>g:hostgroup_01,srv1</p>
<h1>Regexp</h1>
<p>r:test_host_0[12],srv1</p>
<h1>by service group</h1>
<p>*,g:servicegroup_01</p>
<h1>by regexp for the hosts, and label for the services</h1>
<p>r:test_host_0[12],l:label_02</p>
<h1>by hostgroup for the hosts, and regexp for the services</h1>
<p>g:hostgroup_01,r:srv[1]</p>
<h1>by label for the hosts, regexp for the service</h1>
<p>l:label_01,r:srv[1]</p>
<h1>by tag for the host</h1>
<p>t:linux,l:label_02
</code></pre></p>
<h3>The roadmap</h3>
<p>This release was a very long one. It was an important milestone to have, and now the project will be more <em>agile</em> and we will be able to release new versions quicker. The main focus on the next versions will be:</p>
<ul>
<li>backport some <a href="http://demo.shinken-solutions.com">enterprise version</a> views into the community <code>WebUI</code></li>
<li>arbiters relays (local arbiters that will <em>manage</em> a realm)</li>
<li>snapshots (launch <code>ps</code> commands only if huge load problems are occuring)</li>
<li>more api calls for the daemons :)</li>
</ul>
<p>I don't plan to wait another ~year for a new release. I think I'll stick to a 2months release with less change for each. As we don't rely on the module release cycle anymore (can be long for some modules) we can really focus on small short iterations for the framework (like enhance the http api).</p>
<p>Ready for testing your new version? Go!</p>
<p>EDIT: I released a bug fix version, the 2.0.1 this morning. This fix a bug on the https certificate hostnames checks, if you don't use your own certificates or https, you don't need to update your version :)</p>



<p style='border: 2px solid rgba(0,39,59,.2);border-radius: 4px;'><img style='width: 48px;'  data-role="user-avatar" data-user="94550631" src="//a.disquscdn.com/uploads/users/9455/631/avatar92.jpg?1392209481"><a href='#'> jean gabès </a>
<a href='mailto:j.gabes@shinken-solutions.com'><img src="/theme/img/Mail.png" /></a>
<a href='https://twitter.com/naparuba'><img src="/theme/img/Twitter.png" /></a>
<a href='https://github.com/naparuba'><img src="/theme/img/GitHub.png" /></a>
</p>
    <footer>
        <p>Posted in: <a href="/category/talk.html">Talk</a></p>
        <p>Tagged as: <a href="/tag/shinken.html">shinken</a> / <a href="/tag/release.html">release</a></p>
        <p>Wanna tell me what you think? <a href="/">Get in touch.</a></p>
    </footer>

<hr/>

<div id="disqus_thread"></div>
  <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'shinkenlabio'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


        </footer>
    </article>
</section>                    </div>

                    <footer id="site-footer">
                        <p>
                            <a href="" target="_blank">
                                
                            </a> Shinken framework team /
                            <a href="/">Archives</a>
                            / Powered by
                            <a href="https://github.com/getpelican/pelican" target="_blank">
                                Pelican
                            </a>
                        </p>
                    </footer>
                </div> <!-- header+content+footer span -->

            </div> <!-- row -->
        </div> <!-- /container -->

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/theme/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>

        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
        <script>$('body').popover || document.write('<script src="/theme/js/vendor/bootstrap.min.js"><\/script>')</script>

        <script src="/theme/js/vendor/jquery.colorbox-min.js"></script>

        <script src="/theme/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-48477803-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>